# 产品文档

<p align="center">
  <strong>Logcat - 高性能 Android 日志查看工具</strong>
</p>

> 版本: 1.0.0 | 更新日期: 2025-12-04

---

## 目录

- [1. 产品概述](#1-产品概述)
- [2. 功能清单](#2-功能清单)
- [3. 界面说明](#3-界面说明)
- [4. 过滤器语法](#4-过滤器语法)
- [5. 设置选项](#5-设置选项)
- [6. 导入导出](#6-导入导出)
- [7. 版本历史](#7-版本历史)

---

## 1. 产品概述

### 1.1 产品定位

Logcat 是一个独立于 Android Studio 的 Logcat 日志查看工具，旨在提供：

- 🚀 **更快的启动速度** - 秒速启动，无需等待 IDE 加载
- 📦 **更小的体积** - ~10MB vs Android Studio 的数 GB
- 🎯 **专注日志** - 只做一件事，做到极致
- 🔄 **完美兼容** - 与 Android Studio 过滤语法和文件格式兼容

### 1.2 目标用户

| 用户类型 | 使用场景 |
|----------|----------|
| Android 开发者 | 日常调试，查看应用日志 |
| 测试工程师 | Bug 复现，日志分析 |
| 技术支持 | 查看用户提供的日志文件 |

### 1.3 核心价值

```
┌─────────────────────────────────────────────────────┐
│                    Logcat                            │
│                                                      │
│   轻量级  +  高性能  +  专业功能  =  最佳日志工具    │
│                                                      │
│   ~10MB      百万级      AS 兼容                     │
│   秒启动    日志流畅    过滤语法                     │
└─────────────────────────────────────────────────────┘
```

---

## 2. 功能清单

### 2.1 设备管理

| 功能 | 状态 | 描述 |
|------|:----:|------|
| 设备检测 | ✅ | 自动检测已连接的 Android 设备和模拟器 |
| 设备列表 | ✅ | 显示设备名、序列号、连接状态 |
| 模拟器标识 | ✅ | 区分真机和模拟器 |
| 自动连接 | ✅ | 启动时自动选择并连接第一个设备 |
| 设备切换 | ✅ | 运行时切换查看不同设备 |

### 2.2 日志显示

| 功能 | 状态 | 描述 |
|------|:----:|------|
| 实时日志流 | ✅ | 实时显示设备 logcat 输出 |
| 级别颜色 | ✅ | V/D/I/W/E/A 不同颜色区分 |
| 虚拟滚动 | ✅ | 百万级日志流畅渲染 |
| 自动滚动 | ✅ | 新日志到来时自动滚动到底部 |
| 暂停/恢复 | ✅ | 暂停日志更新，方便查看 |
| 列宽调整 | ✅ | 拖拽调整各列宽度 |
| 自动换行 | ✅ | 长消息自动换行显示 |

### 2.3 日志列

| 列 | 状态 | 可配置 |
|------|:----:|:------:|
| 时间戳 | ✅ | 显示/隐藏，格式切换 |
| PID | ✅ | 显示/隐藏 |
| TID | ✅ | 显示/隐藏（与 PID 同列）|
| 包名 | ✅ | 显示/隐藏，隐藏重复 |
| 进程名 | ✅ | 显示/隐藏，隐藏重复 |
| 级别 | ✅ | 显示/隐藏 |
| TAG | ✅ | 显示/隐藏，隐藏重复 |
| 消息 | ✅ | 始终显示 |

### 2.4 过滤功能

| 功能 | 状态 | 描述 |
|------|:----:|------|
| AS 风格语法 | ✅ | 完全兼容 Android Studio 过滤语法 |
| TAG 过滤 | ✅ | 包含/精确/正则匹配 |
| 消息过滤 | ✅ | 包含/精确/正则匹配 |
| 包名过滤 | ✅ | 按应用包名过滤 |
| 级别过滤 | ✅ | 最低级别过滤 |
| 时间过滤 | ✅ | 按时间范围过滤 |
| 排除过滤 | ✅ | 排除匹配的日志 |
| 组合过滤 | ✅ | AND/OR 组合多个条件 |
| Match Case | ✅ | 区分大小写开关 |
| 自动补全 | ✅ | 输入时显示语法提示 |
| 过滤历史 | ✅ | 保存最近 20 条过滤记录 |
| 收藏过滤 | ✅ | 收藏常用过滤条件 |

### 2.5 导入导出

| 功能 | 状态 | 描述 |
|------|:----:|------|
| 导出 .logcat | ✅ | Android Studio 兼容 JSON 格式 |
| 导入 .logcat | ✅ | 导入 AS 导出的日志文件 |
| 导入文本 | ✅ | 自动检测并解析文本日志 |
| 清空日志 | ✅ | 清空当前日志缓冲区 |

### 2.6 界面

| 功能 | 状态 | 描述 |
|------|:----:|------|
| 深色主题 | ✅ | 护眼深色主题 |
| 浅色主题 | ✅ | 明亮浅色主题 |
| 左侧工具栏 | ✅ | 参考 AS 的垂直工具栏 |
| 设置面板 | ✅ | 可视化配置选项 |
| 状态栏 | ✅ | 连接状态、日志统计 |

---

## 3. 界面说明

### 3.1 整体布局

```
┌─────────────────────────────────────────────────────────────────┐
│                          顶部工具栏                              │
│  [📱 设备选择 ▼]  [🔽|搜索过滤框...                     |Cc]    │
├────┬────────────────────────────────────────────────────────────┤
│ 🗑️ │ TIME          PID    PACKAGE       LEVEL  TAG     MESSAGE │
│ ⏸️ ├────────────────────────────────────────────────────────────┤
│    │ 16:38:06.454  1868   system_server   I    Network  ...    │
│ ⬆️ │ 16:38:06.488  1868   system_server   D    Greeze   ...    │
│ ⬇️ │ 16:38:06.490  28498  com.miui.xxx    D    Millet   ...    │
│ ⬇️●│                                                            │
│    │                      日志列表                              │
│ ⇌  │                                                            │
│    │                                                            │
│ ⬆️ │                                                            │
│ ⬇️ │                                                            │
├────┴────────────────────────────────────────────────────────────┤
│ ● 已连接  共 12,345 条  已过滤: 234 条   E 5  W 12  I 100       │
└─────────────────────────────────────────────────────────────────┘
```

### 3.2 左侧工具栏

| 图标 | 功能 | 快捷键（计划）|
|:----:|------|:-------------:|
| 🗑️ | 清空日志 | `Cmd+K` |
| ⏸️/▶️ | 暂停/恢复 | `Space` |
| ⬆️ | 滚动到顶部 | `Cmd+↑` |
| ⬇️ | 滚动到底部 | `Cmd+↓` |
| ⬇️● | 自动滚动开关 | - |
| ⇌ | 换行开关 | - |
| ⬆️ | 导入日志 | `Cmd+O` |
| ⬇️ | 导出日志 | `Cmd+S` |

### 3.3 日志级别颜色

| 级别 | 名称 | 颜色 | 背景 |
|:----:|------|------|------|
| **V** | Verbose | 灰色 `#9E9E9E` | 透明 |
| **D** | Debug | 蓝色 `#2196F3` | 透明 |
| **I** | Info | 绿色 `#4CAF50` | 透明 |
| **W** | Warn | 黄色 `#FFC107` | 浅黄 |
| **E** | Error | 红色 `#F44336` | 浅红 |
| **A** | Assert | 紫色 `#9C27B0` | 浅紫 |

---

## 4. 过滤器语法

### 4.1 基础语法

```bash
# 包含匹配（默认）
tag:MainActivity          # TAG 包含 "MainActivity"
message:error             # 消息包含 "error"
package:com.example       # 包名包含 "com.example"

# 精确匹配
tag=:MainActivity         # TAG 精确等于 "MainActivity"
message=:NullPointerException

# 正则匹配
tag~:Main.*Activity       # TAG 匹配正则 "Main.*Activity"
message~:error|fail       # 消息匹配 "error" 或 "fail"
```

### 4.2 排除语法

```bash
-tag:Ads                  # TAG 不包含 "Ads"
-tag=:AdView              # TAG 不等于 "AdView"
-tag~:Ad.*                # TAG 不匹配正则 "Ad.*"
-message:spam             # 消息不包含 "spam"
```

### 4.3 级别过滤

```bash
level:VERBOSE             # 显示所有级别
level:DEBUG               # DEBUG 及以上
level:INFO                # INFO 及以上
level:WARN                # WARN 及以上
level:ERROR               # ERROR 及以上
level:ASSERT              # 只显示 ASSERT

# 简写
level:V / level:D / level:I / level:W / level:E / level:A
```

### 4.4 时间过滤

```bash
age:30s                   # 最近 30 秒
age:5m                    # 最近 5 分钟
age:1h                    # 最近 1 小时
age:2d                    # 最近 2 天
```

### 4.5 特殊过滤

```bash
is:crash                  # 崩溃日志
is:stacktrace             # 堆栈跟踪
package:mine              # 当前应用的日志
```

### 4.6 组合过滤

```bash
# AND - 空格分隔，所有条件都要满足
tag:Network message:error         # TAG 含 Network 且消息含 error

# OR - | 分隔，满足任一条件
tag:Network | tag:Http            # TAG 含 Network 或 Http

# 复杂组合
tag:Network message:error -tag:Ads level:WARN
# TAG 含 Network、消息含 error、TAG 不含 Ads、级别 >= WARN
```

### 4.7 自动补全

输入时会显示：
1. **语法提示** - 可用的过滤关键词及说明
2. **历史记录** - 匹配的历史过滤条件
3. **使用 Tips** - 底部显示使用技巧

---

## 5. 设置选项

### 5.1 显示设置

| 设置项 | 默认值 | 说明 |
|--------|:------:|------|
| 字体大小 | 12px | 日志文字大小 |
| 行高 | 1.5 | 行高倍数 |
| 最大日志数 | 100,000 | 日志缓冲区大小 |

### 5.2 时间戳设置

| 设置项 | 默认值 | 选项 |
|--------|:------:|------|
| 显示时间戳 | ✅ | 开/关 |
| 时间格式 | 时间 | 日期-时间 / 时间 / 时间戳 |

### 5.3 进程设置

| 设置项 | 默认值 | 说明 |
|--------|:------:|------|
| 显示 PID | ✅ | 显示进程 ID |
| 显示 TID | ❌ | 在同列显示线程 ID |

### 5.4 包名/进程名设置

| 设置项 | 默认值 | 说明 |
|--------|:------:|------|
| 显示包名 | ✅ | 显示应用包名 |
| 显示进程名 | ❌ | 显示进程名称 |
| 隐藏重复包名 | ❌ | 相邻相同只显示一次 |
| 隐藏重复进程名 | ❌ | 相邻相同只显示一次 |

### 5.5 其他列设置

| 设置项 | 默认值 | 说明 |
|--------|:------:|------|
| 显示级别 | ✅ | 显示日志级别 |
| 显示 TAG | ✅ | 显示 TAG 列 |
| 隐藏重复 TAG | ❌ | 相邻相同只显示一次 |

---

## 6. 导入导出

### 6.1 导出

点击左侧工具栏的导出按钮，导出为 `.logcat` 格式（JSON）。

**文件命名**: `设备名_时间戳.logcat`

**格式兼容**: 导出的文件可在 Android Studio 中打开。

### 6.2 导入

支持导入以下格式：

| 格式 | 说明 |
|------|------|
| `.logcat` | Android Studio 导出的 JSON 格式 |
| `.txt` / `.log` | 纯文本日志（自动检测格式）|

导入后：
- 左上角显示文件名和文件图标
- 自动暂停日志流
- 可以使用过滤器分析导入的日志

---

## 7. 版本历史

### v1.0.0 (2025-12-04)

🎉 **首次发布**

- 完整的日志查看和过滤功能
- Android Studio 兼容的过滤语法
- .logcat 格式导入导出
- 深色/浅色主题
- 左侧工具栏
- 设置面板

### 计划中

- 快捷键支持
- 搜索结果跳转
- 设置持久化
- 更多主题选项

---

> 📖 更多信息请参考 [架构文档](ARCHITECTURE.md) 和 [开发指南](DEVELOPMENT.md)
